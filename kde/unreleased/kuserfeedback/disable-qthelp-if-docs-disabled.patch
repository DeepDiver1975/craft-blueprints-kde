From 5f3912ac400949a0b55140078e1f9c97c2ae6ef0 Mon Sep 17 00:00:00 2001
From: =?UTF-8?q?Julius=20K=C3=BCnzel?= <jk.kdedev@smartlab.uber.space>
Date: Thu, 21 Sep 2023 19:36:44 +0000
Subject: [PATCH] Do not look for QtHelp if docs are disabled

Otherwise it may fail like on macOS ARM

CCBUG: 473542
---
 CMakeLists.txt | 7 ++++---
 1 file changed, 4 insertions(+), 3 deletions(-)

diff --git a/CMakeLists.txt b/CMakeLists.txt
index b9a7c95f..0055ae02 100644
--- a/CMakeLists.txt
+++ b/CMakeLists.txt
@@ -51,11 +51,12 @@ ecm_setup_version(PROJECT
 find_package(Qt${QT_MAJOR_VERSION} 5.4 NO_MODULE REQUIRED COMPONENTS Core Network)
 find_package(Qt${QT_MAJOR_VERSION} NO_MODULE QUIET OPTIONAL_COMPONENTS Widgets Charts Test Qml Svg PrintSupport)
 find_package(QmlLint)
-if (NOT CMAKE_CROSSCOMPILING)
-    find_package(Qt${QT_MAJOR_VERSION} NO_MODULE QUIET OPTIONAL_COMPONENTS Help)
-endif()
 
 if (ENABLE_DOCS)
+    if (NOT CMAKE_CROSSCOMPILING)
+        find_package(Qt${QT_MAJOR_VERSION} NO_MODULE QUIET OPTIONAL_COMPONENTS Help)
+    endif()
+
     if(QT_MAJOR_VERSION STREQUAL "5")
         find_package(Qt5 CONFIG OPTIONAL_COMPONENTS DocTools)
     else()
-- 
GitLab

